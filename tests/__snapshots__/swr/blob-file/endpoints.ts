/**
 * Generated by orval v8.4.2 ðŸº
 * Do not edit manually.
 * Blob File
 * Blobs
 * OpenAPI spec version: 1.0.0
 */
import useSwr from 'swr';
import type { Key, SWRConfiguration } from 'swr';

import { faker } from '@faker-js/faker';

import { HttpResponse, http } from 'msw';
import type { RequestHandlerOptions } from 'msw';

/**
 * @summary Binary Blob response
 */
export type getBinaryBlobResponse200 = {
  data: Blob;
  status: 200;
};

export type getBinaryBlobResponseSuccess = getBinaryBlobResponse200 & {
  headers: Headers;
};
export type getBinaryBlobResponse = getBinaryBlobResponseSuccess;

export const getGetBinaryBlobUrl = (version: number = 1) => {
  return `/v${version}/binary-blob`;
};

export const getBinaryBlob = async (
  version: number = 1,
  options?: RequestInit,
): Promise<getBinaryBlobResponse> => {
  const res = await fetch(getGetBinaryBlobUrl(version), {
    ...options,
    method: 'GET',
  });

  const body = [204, 205, 304].includes(res.status) ? null : await res.text();

  const data: getBinaryBlobResponse['data'] = body ? JSON.parse(body) : {};
  return {
    data,
    status: res.status,
    headers: res.headers,
  } as getBinaryBlobResponse;
};

export const getGetBinaryBlobKey = (version: number = 1) =>
  [`/v${version}/binary-blob`] as const;

export type GetBinaryBlobQueryResult = NonNullable<
  Awaited<ReturnType<typeof getBinaryBlob>>
>;

/**
 * @summary Binary Blob response
 */
export const useGetBinaryBlob = <TError = Promise<unknown>>(
  version: number = 1,
  options?: {
    swr?: SWRConfiguration<
      Awaited<ReturnType<typeof getBinaryBlob>>,
      TError
    > & { swrKey?: Key; enabled?: boolean };
    fetch?: RequestInit;
  },
) => {
  const { swr: swrOptions, fetch: fetchOptions } = options ?? {};

  const isEnabled = swrOptions?.enabled !== false && !!version;
  const swrKey =
    swrOptions?.swrKey ??
    (() => (isEnabled ? getGetBinaryBlobKey(version) : null));
  const swrFn = () => getBinaryBlob(version, fetchOptions);

  const query = useSwr<Awaited<ReturnType<typeof swrFn>>, TError>(
    swrKey,
    swrFn,
    swrOptions,
  );

  return {
    swrKey,
    ...query,
  };
};

export const getGetBinaryBlobResponseMock = (): ArrayBuffer =>
  new ArrayBuffer(faker.number.int({ min: 1, max: 64 }));

export const getGetBinaryBlobMockHandler = (
  overrideResponse?:
    | ArrayBuffer
    | ((
        info: Parameters<Parameters<typeof http.get>[1]>[0],
      ) => Promise<ArrayBuffer> | ArrayBuffer),
  options?: RequestHandlerOptions,
) => {
  return http.get(
    '*/v:version/binary-blob',
    async (info: Parameters<Parameters<typeof http.get>[1]>[0]) => {
      const binaryBody =
        overrideResponse !== undefined
          ? typeof overrideResponse === 'function'
            ? await overrideResponse(info)
            : overrideResponse
          : getGetBinaryBlobResponseMock();
      return HttpResponse.arrayBuffer(
        binaryBody instanceof ArrayBuffer ? binaryBody : new ArrayBuffer(0),
        {
          status: 200,
          headers: { 'Content-Type': 'application/octet-stream' },
        },
      );
    },
    options,
  );
};
export const getBlobFileMock = () => [getGetBinaryBlobMockHandler()];
